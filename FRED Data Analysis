#Checking for necessary packages
library("httr")
library("jsonlite")
library("data.table")
library("dplyr")
library("lubridate")
library("car")
library("nortest")
library("corrplot")


# Loading all data into the script 

Unemployment = read.csv("C:/Users/lilni/OneDrive - Mount St. Mary's University/Desktop/FRED Data Science/Unemployment.csv")
CC_Delinq = read.csv("C:/Users/lilni/OneDrive - Mount St. Mary's University/Desktop/FRED Data Science/CC_Delinquency.csv")
Effective_Rate = read.csv("C:/Users/lilni/OneDrive - Mount St. Mary's University/Desktop/FRED Data Science/Effective_Rate.csv")
Savings = read.csv("C:/Users/lilni/OneDrive - Mount St. Mary's University/Desktop/FRED Data Science/Saving.csv")
SP_500 = read.csv("C:/Users/lilni/OneDrive - Mount St. Mary's University/Desktop/FRED Data Science/SP500.csv")
Real_GDP = read.csv("C:/Users/lilni/OneDrive - Mount St. Mary's University/Desktop/FRED Data Science/Real_GDP.csv")

#Check column names within the data for the join to work
head(Unemployment)
head(CC_Delinq)
head(Effective_Rate)

#Kept seeing an error with the inner_join so renaming the columns to make sure they match
Unemployment <- Unemployment %>% rename(Date = DATE, Unemployment = UNRATE)
CC_Delinq <- CC_Delinq %>% rename (Date = DATE, CC_Rate = DRCCLACBS)
Effective_Rate <- Effective_Rate %>% rename (Date = DATE, Effect_Rate = DFF)

# Join the data together based on their dates
Merged_Data <- Unemployment %>%
  inner_join(CC_Delinq, by = "Date") %>%
  inner_join(Effective_Rate, by = "Date")

# Create correlation matrix

Variables <- Merged_Data %>%
  select(Unemployment_Unemployment, CC_Delinq_CC_Rate, Effective_Rate_DFF)

Correlation_Matrix <- cor(Variables)
print(Correlation_Matrix)











